{% extends "bm/dashboard.html" %}
{% load i18n %}
{% block meta_tags %}
    <!-- Open Graph data -->
    <meta property="og:title" content="{{ benchmark.name }}" />
    <meta property="og:type" content="article" />
    <meta property="og:image" content="{{ STATIC_URL }}img/bdde_logo_wide.png" />
    <meta property="og:url" content="{{ url }}" />
    <meta property="og:description" content="{{ question.description }}" />

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="{{ url }}">
    <meta name="twitter:title" content="{{ benchmark.name }}">
    <meta name="twitter:image" content="{{ STATIC_URL }}img/bdde_logo_wide.png">
    <meta name="twitter:description" content="{{ question.description }}">
{% endblock %}


{% block navigation %}

  <header class="navbar navbar-default bs-docs-nav" id="top" role="banner">
      <div class="container top-navbar">
        <div class="navbar-header">
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><img src='{{ STATIC_URL }}/img/bdde_logo.png'/></a>
        </div>
        <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
            <ul class='main-nav text-center dashboard-nav'>
              <li><a href="/dashboard">Dashboard</a></li>
              <li class="dropdown active">
                 <a href="#" class="dropdown-toggle" data-toggle="dropdown">Benchmarks <span class="caret"></span></a>
                 <ul class="dropdown-menu" role="menu">
                    <li><a href="#">Create</a></li>
                 </ul>
              </li>
              <li><a href="#">Support</a></li>

            </ul>
            <ul class='nav navbar-nav navbar-right search-fields'>
              <li>
                  <form class="navbar-form navbar-right" role="search">
                    <div class="form-group">
                      <input type="text" class="form-control" placeholder="Search benchmarks:">
                    </div>
                    <button type="submit" class="btn btn-search">go</button>
                  </form>
                </li>
            </ul>

        </nav>

      </div>
    </header>

    <div class='user-nav'>
        <div class='container'>
            <div class='row'>
            <div class='col-md-8 col-xs-6'>
                <div class='hello'>Hello,</div>
                <ul class='user-nav-inner'>
                    <li class='username'>{{ user.first_name }} {{ user.last_name }}</li>
                    <li class="dropdown">
                     <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class='fa fa-cogs'></i></a>
                     <ul class="dropdown-menu" role="menu">
                        <li><a href="/logout">Sign Out</a></li>
                     </ul>
                  </li>
                    <li><a href='#'><i class='fa fa-unlock'></i></a></li>
                </ul>
            </div>
            <div class='col-md-4 col-xs-6'>
                <a href="{% url 'bm_create' %}" class='btn btn-primary pull-right'>Create new benchmark <i class='fa fa-plus-circle'></i></a>
            </div>
        </div>
        </div>
    </div>
{% endblock %}
{% block content %}


<div class='container bordered bgwhite open-benchmark-container margined'>
    <div class='ob-header'>
        <div class='row'>
            <div class='col-md-8'>
                <div class="ob_image"></div>
                <div class="ob_title">{{ benchmark.name }}</div>
                <div class="ob_descr">{{ benchmark.question.first.label }}</div>
            </div>
            <div class='col-md-4'>
                <div class="addthis_toolbox">
                    <div class="custom_images">
                        <a class="addthis_button_linkedin"><img src="{{ STATIC_URL }}img/linkedin.png"/></a>
                        <a class="addthis_button_twitter"><img src="{{ STATIC_URL }}img/twitter.png"/></a>
                        <a class="addthis_button_facebook"><img src="{{ STATIC_URL }}img/facebook.png" /></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class='benchmark-help'>
        <div class='row'>
            <div class='col-md-9'>
                <p>{{ benchmark.question.first.description }}</p>
                <p class='info'>
                    <span><strong>Submitted by: </strong><span class='color-teal'>{{ benchmark.owner }}</span></span>
                    <span><strong>Industry: </strong>{{ benchmark.industry }}</span>
                    <span><strong>Geography: </strong>{{ benchmark.geographic_coverage.first.name }}</span>
                    <span><strong>Published: </strong>{{ benchmark.start_date }}</span>
                </p>
            </div>
            <div class='col-md-3'>
                <a href='#' data-export='excel'>Export Results to Excel</a>
            </div>
        </div>
    </div>
    <div class='row'>
        <div class='col-md-7'>
            <div class='col-md-12 bordered bgwhite margined margin-bot'>
                <div class='title-header'>
                    123
                </div>
                <div class='row'>
                    <div class='benchmark open'>
                        <img src="{{ STATIC_URL }}img/graph-placeholder.png" alt="...">
                        <div class='benchmark-stats perc-based'>
                            <div class='single-stat'>
                                <span class='title'>Min</span>
                                <span class='value'>0%</span>
                            </div>
                            <div class='single-stat'>
                                <span class='title'>Max</span>
                                <span class='value'>91%</span>
                            </div>
                            <div class='single-stat'>
                                <span class='title'>Mean</span>
                                <span class='value'>47%</span>
                            </div>
                            <div class='single-stat'>
                                <span class='title'>Avg</span>
                                <span class='value'>51%</span>
                            </div>
                            <div class='single-stat'>
                                <span class='title'>SD</span>
                                <span class='value'>1.4</span>
                            </div>
                        </div>
                        <div class='benchmark-footer text-center'>
                            <span class='color-blue'><i class='fa fa-user'></i> 125 Contributors</span>
                            <span class='separator'></span>
                            <span class='rated-value'>
                                <div class='fill-value' style='width: 72%;'></div>
                            </span>
                            <span class='color-grey'>(17)</span>
                            <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#rating">Rate this benchmark <i class='fa fa-star'></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class='col-md-5'>
            <div class='col-md-12 bordered bgwhite margined margin-bot'>
                <div class='title-header'>
                    Contributor data
                </div>
                <div class='row'>
                    <div id='geoStats'>
                        <div id='geoChart' class='statGraph'></div>
                        <div class='table-header'>Contributor Geographic:</div>
                        <div class='statsTable'>
                            <table>
                                <tbody>
                                    <tr>
                                        <td>data</td>
                                        <td>%</td>
                                    </tr>                                    
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div id='roleStats'>
                        <div id='roleChart' class='statGraph'></div>
                        <div class='table-header'>Contributor Role:</div>
                        <div class='statsTable'>
                            <table>
                                <tbody>
                                    <tr>
                                        <td>data</td>
                                        <td>%</td>
                                    </tr>                                    
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div id='industryStats'>
                        <div id='industryChart' class='statGraph'></div>
                        <div class='table-header'>Contributor Industry:</div>
                        <div class='statsTable'>
                            <table>
                                <tbody>
                                    <tr>
                                        <td>data</td>
                                        <td>%</td>
                                    </tr>                                    
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div id='countryStats'>
                        <div id='countryChart' class='statGraph'></div>
                        <div class='table-header'>Contributor Country:</div>
                        <div class='statsTable'>
                            <table>
                                <tbody>
                                    <tr>
                                        <td>data</td>
                                        <td>%</td>
                                    </tr>                                    
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>
</div>




<!-- Modal -->
<div class="modal fade" id="rating" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true"><i class='fa fa-times-circle'></i></span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">Rate Benchmark</h4>
      </div>
      <div class="modal-body">
        <p>Please rate the benchmark <strong>{{ benchmark.name }}</strong> results based on your level of confidence that the data is accurate.</p>
        <div class='text-center'>
            <span class="rating">
                <span data-score="5" class="star" data-dismiss="modal">
                </span><span data-score="4" class="star" data-dismiss="modal">
                </span><span data-score="3" class="star" data-dismiss="modal">
                </span><span data-score="2" class="star" data-dismiss="modal">
                </span><span data-score="1" class="star" data-dismiss="modal"></span>
            </span>
        </div>
      </div>
    </div>
  </div>
</div>

{% block graphs %}
<script type="text/javascript">
    var statisticGeoData="{{ geo|safe }}";
    var statisticRoleData = "{{ role|safe }}";
    var statisticIndustriesData = "{{ industries|safe }}";
    var statisticCountriesData = "{{ countries|safe }}";
</script>
<!-- <script type="text/javascript">
    
    google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var roleChartData = google.visualization.arrayToDataTable(statisticRoleData);
        var geoChartData = google.visualization.arrayToDataTable(statisticGeoData);
        var countryChartData = google.visualization.arrayToDataTable(statisticCountryData);
        var industryChartData = google.visualization.arrayToDataTable(statisticIndustryData);

        var options = {
          legend: 'none',
          pieSliceText: 'label',
          tooltip: { text: 'percentage' }
        };

        var roleChart = new google.visualization.PieChart(document.getElementById('roleChart'));
        var geoChart = new google.visualization.PieChart(document.getElementById('geoChart'));
        var countryChart = new google.visualization.PieChart(document.getElementById('countryChart'));
        var industryChart = new google.visualization.PieChart(document.getElementById('industryChart'));
        roleChart.draw(roleChartData, options);
        geoChart.draw(geoChartData, options);
        countryChart.draw(countryChartData, options);
        industryChart.draw(industryChartData, options);
      }
</script> -->
<form action="" method="post">{% csrf_token %}
    {{ form }}
</form>
{% endblock %}
    
{% endblock %}